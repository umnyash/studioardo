const closeNotification=e=>{const t=e.target.closest(".notification__close");t&&t.closest(".good-order-notification, .notification").remove()};document.body.addEventListener("click",closeNotification);const goodLists=document.querySelectorAll(".good-list");if(goodLists){const e=e=>{const t=e.target.closest(".good__add-cart");if(!t)return;t.closest(".good").classList.add("good--in-cart")},t=e=>{const t=e.target.closest(".good__remove-cart");if(!t)return;t.closest(".good").classList.remove("good--in-cart")},o=e=>{const t=e.target.closest(".good__quick-order-button");if(!t)return;t.closest(".good").classList.add("good--quick-order")},s=e=>{const t=e.target.closest(".good__cancel-order");if(!t)return;t.closest(".good").classList.remove("good--quick-order")},i=(e,t)=>{const o=`\n      <div class="good-order-notification">\n        <div class="notification notification--alter notification--${e}">\n          <p class="notification__text">${t}</p>\n          <button class="notification__close" type="button">\n            <span class="visually-hidden">Закрыть уведомление</span>\n          </button>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",o)},a=e=>{const t=e.target.closest(".good__submit-order");if(!t)return;t.closest(".good").classList.remove("good--quick-order"),i("success","С вами свяжется менеджер для подтверждения заказа")};goodLists.forEach((i=>{i.addEventListener("click",a),i.addEventListener("click",e),i.addEventListener("click",t),i.addEventListener("click",o),i.addEventListener("click",s)}))}const initNumberFieldButtons=e=>{const t=e.querySelector(".number-field__control");e.querySelector(".number-field__button--minus").addEventListener("click",(()=>{t.stepDown()})),e.querySelector(".number-field__button--plus").addEventListener("click",(()=>{t.stepUp()}))};document.querySelectorAll(".number-field").forEach(initNumberFieldButtons);let UPLOAD_URL="https://echo.htmlacademy.ru/courses";const sendData=(e,t,o)=>{fetch(UPLOAD_URL,{method:"POST",body:o}).then((o=>{o.ok?e():t()})).catch((()=>{t()}))},setCalculationFormSubmit=e=>{const t=e.closest(".custom-form-2--calculation"),o=e.querySelector(".form__submit");e.addEventListener("submit",(e=>{e.preventDefault(),o.classList.add("loader"),UPLOAD_URL=Math.random()>.5?"https://echo.htmlacademy.ru/courses":"error",setTimeout((()=>{sendData((()=>(t.classList.remove("custom-form-2--notice--error"),t.classList.add("custom-form-2--notice--success"),void o.classList.remove("loader"))),(()=>(t.classList.remove("custom-form-2--notice--success"),t.classList.add("custom-form-2--notice--error"),void o.classList.remove("loader"))),new FormData(e.target))}),1e3)}))};document.querySelectorAll(".custom-form-2--calculation .form__body").forEach(setCalculationFormSubmit);const initCalculationForms=e=>{const t=e.querySelector('[name="count"]');if(!t)return;const o=["countertops","window-sills","steps"],s=e.querySelector('[name="length"]'),i=e.querySelector('[name="width"]'),a=e.querySelector('[name="area"]'),r=e.querySelector('[name="material"]'),l=e.querySelector('[name="type"]'),n=e.querySelector(".form__result"),c=a.closest(".form__textfield-wrapper"),d=t.closest(".form__textfield-wrapper");let u=!1;const m=()=>{o.includes(l.value)?n.classList.toggle("form__result--hidden",!(s.value&&t.value&&r.value)):n.classList.toggle("form__result--hidden",!(f()&&r.value))},f=()=>!!+a.value,v=()=>{a.value=+s.value*+i.value/1e4,m()},_=e=>{e.value=""};t.addEventListener("input",m),s.addEventListener("input",v),i.addEventListener("input",v),a.addEventListener("input",(()=>{_(s),_(i),m()})),r.addEventListener("change",(()=>{m()}));l.addEventListener("change",(()=>{if(o.includes(l.value)){if(u)return;a.disabled=!0,c.classList.add("form__textfield-wrapper--hidden"),t.disabled=!1,d.classList.remove("form__textfield-wrapper--hidden"),s.removeEventListener("input",v),s.addEventListener("input",m),i.removeEventListener("input",v),u=!0}else{if(!u)return;t.disabled=!0,d.classList.add("form__textfield-wrapper--hidden"),a.disabled=!1,c.classList.remove("form__textfield-wrapper--hidden"),s.removeEventListener("input",m),s.addEventListener("input",v),i.addEventListener("input",v),u=!1}}))};document.querySelectorAll(".custom-form-2--calculation .form__body").forEach(initCalculationForms);const MOSAIC_COST=Object.freeze({standardDifficulty:{mix:{glass:119.52,metallized:165.52},"stretch-mark":{glass:134.19,metallized:180.19},"matrix-panel":{glass:181.33,metallized:227.33,stone:368.33},"art-panel":{glass:589.9,metallized:635.9,stone:1085.95,smalt:1085.95}},mediumDifficulty:{mix:{glass:123.71,metallized:169.71},"stretch-mark":{glass:139.43,metallized:185.43},"matrix-panel":{glass:212.76,metallized:258.76,stone:446.9},"art-panel":{glass:663.24,metallized:709.24,stone:1337.38,smalt:1337.38}},highDifficulty:{mix:{glass:128.95,metallized:174.95},"stretch-mark":{glass:139.43,metallized:185.43},"matrix-panel":{glass:244.19,metallized:290.19,stone:494.05},"art-panel":{glass:946.1,metallized:992.1,stone:1819.29,smalt:1819.29}}});document.querySelectorAll(".calculation--mosaic").forEach((e=>{initMosaicCalculationForm(e,MOSAIC_COST)})),document.querySelectorAll(".calculation-material--mosaic").forEach((e=>{initMosaicCalculationForm(e,MOSAIC_COST)}));