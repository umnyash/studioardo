const closeNotification=e=>{const t=e.target.closest(".notification__close");t&&t.closest(".good-order-notification, .notification").remove()};document.body.addEventListener("click",closeNotification);const goodLists=document.querySelectorAll(".good-list");if(goodLists){const e=e=>{const t=e.target.closest(".good__add-cart");if(!t)return;t.closest(".good").classList.add("good--in-cart")},t=e=>{const t=e.target.closest(".good__remove-cart");if(!t)return;t.closest(".good").classList.remove("good--in-cart")},o=e=>{const t=e.target.closest(".good__quick-order-button");if(!t)return;t.closest(".good").classList.add("good--quick-order")},s=e=>{const t=e.target.closest(".good__cancel-order");if(!t)return;t.closest(".good").classList.remove("good--quick-order")},r=(e,t)=>{const o=`\n      <div class="good-order-notification">\n        <div class="notification notification--alter notification--${e}">\n          <p class="notification__text">${t}</p>\n          <button class="notification__close" type="button">\n            <span class="visually-hidden">Закрыть уведомление</span>\n          </button>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",o)},n=e=>{const t=e.target.closest(".good__submit-order");if(!t)return;t.closest(".good").classList.remove("good--quick-order"),r("success","С вами свяжется менеджер для подтверждения заказа")};goodLists.forEach((r=>{r.addEventListener("click",n),r.addEventListener("click",e),r.addEventListener("click",t),r.addEventListener("click",o),r.addEventListener("click",s)}))}const initNumberFieldButtons=e=>{const t=e.querySelector(".number-field__control");e.querySelector(".number-field__button--minus").addEventListener("click",(()=>{t.stepDown()})),e.querySelector(".number-field__button--plus").addEventListener("click",(()=>{t.stepUp()}))};document.querySelectorAll(".number-field").forEach(initNumberFieldButtons);let UPLOAD_URL="https://echo.htmlacademy.ru/courses";const sendData=(e,t,o)=>{fetch(UPLOAD_URL,{method:"POST",body:o}).then((o=>{o.ok?e():t()})).catch((()=>{t()}))},setCalculationFormSubmit=e=>{const t=e.closest(".custom-form-2--calculation"),o=e.querySelector(".form__submit");e.addEventListener("submit",(e=>{e.preventDefault(),o.classList.add("loader"),UPLOAD_URL=Math.random()>.5?"https://echo.htmlacademy.ru/courses":"error",setTimeout((()=>{sendData((()=>(t.classList.remove("custom-form-2--notice--error"),t.classList.add("custom-form-2--notice--success"),void o.classList.remove("loader"))),(()=>(t.classList.remove("custom-form-2--notice--success"),t.classList.add("custom-form-2--notice--error"),void o.classList.remove("loader"))),new FormData(e.target))}),1e3)}))};document.querySelectorAll(".custom-form-2--calculation .form__body").forEach(setCalculationFormSubmit);const initCalculationForms=e=>{const t=e.querySelector('[name="count"]');if(!t)return;const o=["countertops","window-sills","steps"],s=e.querySelector('[name="length"]'),r=e.querySelector('[name="width"]'),n=e.querySelector('[name="area"]'),i=e.querySelector('[name="material"]'),c=e.querySelector('[name="type"]'),d=e.querySelector(".form__result"),a=n.closest(".form__textfield-wrapper"),l=t.closest(".form__textfield-wrapper");let u=!1;const m=()=>{o.includes(c.value)?d.classList.toggle("form__result--hidden",!(s.value&&t.value&&i.value)):d.classList.toggle("form__result--hidden",!(f()&&i.value))},f=()=>!!+n.value,v=()=>{n.value=+s.value*+r.value/1e4,m()},L=e=>{e.value=""};t.addEventListener("input",m),s.addEventListener("input",v),r.addEventListener("input",v),n.addEventListener("input",(()=>{L(s),L(r),m()})),i.addEventListener("change",(()=>{m()}));c.addEventListener("change",(()=>{if(o.includes(c.value)){if(u)return;n.disabled=!0,a.classList.add("form__textfield-wrapper--hidden"),t.disabled=!1,l.classList.remove("form__textfield-wrapper--hidden"),s.removeEventListener("input",v),s.addEventListener("input",m),r.removeEventListener("input",v),u=!0}else{if(!u)return;t.disabled=!0,l.classList.add("form__textfield-wrapper--hidden"),n.disabled=!1,a.classList.remove("form__textfield-wrapper--hidden"),s.removeEventListener("input",m),s.addEventListener("input",v),r.addEventListener("input",v),u=!1}}))};document.querySelectorAll(".custom-form-2--calculation .form__body").forEach(initCalculationForms);